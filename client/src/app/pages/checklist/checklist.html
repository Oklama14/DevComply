<div class="checklist-page">
  <header class="page-header">
    <h1>Checklist LGPD</h1>
    <button class="btn-primary">
      <span>Gerar Relatório</span>
    </button>
  </header>

  <div class="project-header">
    <h2>Projeto: E-commerce App</h2>
    <p>Aplicativo de e-commerce com processamento de dados de clientes.</p>
  </div>

  <div *ngFor="let category of checklistCategories" class="category-container">
    <div class="category-header">
      <h3>{{ category.name }}</h3>
    </div>
    <!-- O mat-accordion garante que apenas um painel esteja aberto de cada vez -->
    <mat-accordion>
      <mat-expansion-panel *ngFor="let item of category.items" class="checklist-item-panel">
        <mat-expansion-panel-header>
          <mat-panel-title class="item-main">
            <input 
              type="checkbox" 
              [id]="item.id" 
              [(ngModel)]="item.checked"
              (ngModelChange)="onCheckboxChange(item)"
              (click)="$event.stopPropagation()">
            <label [for]="item.id">{{ item.text }}</label>
            <span class="article-tag">{{ item.article }}</span>
          </mat-panel-title>
        </mat-expansion-panel-header>
        
        <!-- Conteúdo que aparece quando o painel expande -->
        <div class="expanded-content">
          <div class="item-details">
            <p>{{ item.details }}</p>
          </div>
          <div class="form-group">
            <label>Explicação da sua implementação:</label>
            <textarea [(ngModel)]="item.implementationDetails" placeholder="Descreva como a sua solução atende a este requisito..."></textarea>
          </div>
          <div class="form-group">
            <label>Detalhes técnicos:</label>
            <textarea [(ngModel)]="item.technicalDetails" placeholder="Detalhe aspetos técnicos como: tecnologias utilizadas, etc."></textarea>
          </div>
        </div>
      </mat-expansion-panel>
    </mat-accordion>
  </div>
</div>
